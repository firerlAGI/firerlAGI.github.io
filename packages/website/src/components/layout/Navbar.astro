---
import LanguageSwitcher from '../react/LanguageSwitcher'
---

<nav class="fixed top-0 left-0 right-0 h-16 bg-[#050505]/50 backdrop-blur-[20px] border-b border-cyan-400/10 flex items-center justify-between px-6 z-[1000] transition-all duration-300 ease-[cubic-bezier(0.4,0,0.2,1)] navbar">
  <a href="/" class="text-2xl font-bold text-white font-cyber tracking-widest transition-all duration-250 ease-[cubic-bezier(0.25,0.1,0.25,1)]">F<span class="text-cyan-400 drop-shadow-[0_0_10px_rgba(0,255,255,0.5)]">IR</span>ER<span class="text-cyan-400 drop-shadow-[0_0_10px_rgba(0,255,255,0.5)]">LA</span>GI</a>

  <div class="hidden md:flex gap-8">
    <a href="/about" class="text-sm text-gray-400 font-mono tracking-widest relative transition-all duration-250 ease-[cubic-bezier(0.25,0.1,0.25,1)] hover:text-cyan-400 hover:drop-shadow-[0_0_10px_rgba(0,255,255,0.5)]" data-i18n="nav.about">/ABOUT</a>
    <a href="/#skills" class="text-sm text-gray-400 font-mono tracking-widest relative transition-all duration-250 ease-[cubic-bezier(0.25,0.1,0.25,1)] hover:text-cyan-400 hover:drop-shadow-[0_0_10px_rgba(0,255,255,0.5)]" data-i18n="nav.skills">/ACTIVITY</a>
    <a href="/#projects" class="text-sm text-gray-400 font-mono tracking-widest relative transition-all duration-250 ease-[cubic-bezier(0.25,0.1,0.25,1)] hover:text-cyan-400 hover:drop-shadow-[0_0_10px_rgba(0,255,255,0.5)]" data-i18n="nav.projects">/PROJECTS</a>
    <a href="/#blog" class="text-sm text-gray-400 font-mono tracking-widest relative transition-all duration-250 ease-[cubic-bezier(0.25,0.1,0.25,1)] hover:text-cyan-400 hover:drop-shadow-[0_0_10px_rgba(0,255,255,0.5)]" data-i18n="nav.blog">/LOGS</a>
    <a href="/#contact" class="text-sm text-gray-400 font-mono tracking-widest relative transition-all duration-250 ease-[cubic-bezier(0.25,0.1,0.25,1)] hover:text-cyan-400 hover:drop-shadow-[0_0_10px_rgba(0,255,255,0.5)]" data-i18n="nav.contact">/CONTACT</a>
  </div>

  <div class="flex gap-4 items-center">
    <div class="hidden md:block">
      <LanguageSwitcher client:idle />
    </div>
    <button class="md:hidden flex flex-col justify-around w-8 h-8 bg-transparent border-none cursor-pointer p-0 z-[1001] mobile-menu-toggle" aria-label="打开菜单" aria-expanded="false">
      <span class="w-full h-0.5 bg-cyan-400 rounded-sm transition-all duration-300 shadow-[0_0_5px_rgba(0,255,255,0.3)]"></span>
      <span class="w-full h-0.5 bg-cyan-400 rounded-sm transition-all duration-300 shadow-[0_0_5px_rgba(0,255,255,0.3)]"></span>
      <span class="w-full h-0.5 bg-cyan-400 rounded-sm transition-all duration-300 shadow-[0_0_5px_rgba(0,255,255,0.3)]"></span>
    </button>
  </div>
</nav>

<div class="fixed inset-0 bg-[#050505]/95 backdrop-blur-[20px] translate-x-full transition-transform duration-300 ease-[cubic-bezier(0.4,0,0.2,1)] z-[999] flex items-center justify-center border-l border-cyan-400/30 mobile-menu">
  <div class="flex flex-col gap-12 items-center">
    <a href="/about" class="text-3xl text-white font-cyber tracking-widest transition-all duration-200 hover:text-cyan-400 hover:drop-shadow-[0_0_20px_rgba(0,255,255,0.5)] mobile-nav-link" data-i18n="nav.about">/ABOUT</a>
    <a href="/#skills" class="text-3xl text-white font-cyber tracking-widest transition-all duration-200 hover:text-cyan-400 hover:drop-shadow-[0_0_20px_rgba(0,255,255,0.5)] mobile-nav-link" data-i18n="nav.skills">/ACTIVITY</a>
    <a href="/#projects" class="text-3xl text-white font-cyber tracking-widest transition-all duration-200 hover:text-cyan-400 hover:drop-shadow-[0_0_20px_rgba(0,255,255,0.5)] mobile-nav-link" data-i18n="nav.projects">/PROJECTS</a>
    <a href="/#blog" class="text-3xl text-white font-cyber tracking-widest transition-all duration-200 hover:text-cyan-400 hover:drop-shadow-[0_0_20px_rgba(0,255,255,0.5)] mobile-nav-link" data-i18n="nav.blog">/LOGS</a>
    <a href="/#contact" class="text-3xl text-white font-cyber tracking-widest transition-all duration-200 hover:text-cyan-400 hover:drop-shadow-[0_0_20px_rgba(0,255,255,0.5)] mobile-nav-link" data-i18n="nav.contact">/CONTACT</a>
  </div>
</div>

<script>
  const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
  const mobileMenu = document.querySelector('.mobile-menu');
  const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
  
  function toggleMobileMenu() {
    const isOpen = mobileMenu?.classList.contains('translate-x-0');
    mobileMenuToggle?.classList.toggle('active');
    
    // Toggle transform class
    if (mobileMenu?.classList.contains('translate-x-full')) {
        mobileMenu.classList.remove('translate-x-full');
        mobileMenu.classList.add('translate-x-0');
    } else {
        mobileMenu?.classList.add('translate-x-full');
        mobileMenu?.classList.remove('translate-x-0');
    }

    mobileMenuToggle?.setAttribute('aria-expanded', (!isOpen).toString());
    document.body.style.overflow = !isOpen ? 'hidden' : '';

    // Handle hamburger icon animation
    const spans = mobileMenuToggle?.querySelectorAll('span');
    if (spans && spans.length === 3) {
        if (!isOpen) { // Opening
            spans[0].style.transform = 'rotate(45deg) translate(5px, 5px)';
            spans[0].style.backgroundColor = '#f0f';
            spans[0].style.boxShadow = '0 0 5px rgba(255, 0, 255, 0.3)';
            
            spans[1].style.opacity = '0';
            
            spans[2].style.transform = 'rotate(-45deg) translate(5px, -5px)';
            spans[2].style.backgroundColor = '#f0f';
            spans[2].style.boxShadow = '0 0 5px rgba(255, 0, 255, 0.3)';
        } else { // Closing
            spans[0].style.transform = '';
            spans[0].style.backgroundColor = '#0ff';
            spans[0].style.boxShadow = '0 0 5px rgba(0, 255, 255, 0.3)';
            
            spans[1].style.opacity = '1';
            
            spans[2].style.transform = '';
            spans[2].style.backgroundColor = '#0ff';
            spans[2].style.boxShadow = '0 0 5px rgba(0, 255, 255, 0.3)';
        }
    }
  }
  
  mobileMenuToggle?.addEventListener('click', toggleMobileMenu);
  
  mobileNavLinks.forEach(link => {
    link.addEventListener('click', toggleMobileMenu);
  });
  
  window.addEventListener('scroll', () => {
    const navbar = document.querySelector('.navbar');
    if (window.scrollY > 10) {
      navbar?.classList.add('bg-[#050505]/90');
      navbar?.classList.add('shadow-[0_0_20px_rgba(0,255,255,0.1)]');
      navbar?.classList.remove('bg-[#050505]/50');
    } else {
      navbar?.classList.remove('bg-[#050505]/90');
      navbar?.classList.remove('shadow-[0_0_20px_rgba(0,255,255,0.1)]');
      navbar?.classList.add('bg-[#050505]/50');
    }
  });
  
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      if (!href || href === '#') return;
      const target = document.querySelector(href);
      if (target) {
        e.preventDefault();
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
</script>
